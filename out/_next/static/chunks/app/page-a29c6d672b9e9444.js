(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>i,r:()=>o});var s=a(5155);a(2115);var n=a(9708),r=a(2085),l=a(9434);let o=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:t,variant:a,size:r,asChild:i=!1,...d}=e,c=i?n.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,l.cn)(o({variant:a,size:r,className:t})),...d})}},8856:(e,t,a)=>{"use strict";a.d(t,{E:()=>r});var s=a(5155),n=a(9434);function r(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"skeleton",className:(0,n.cn)("bg-accent animate-pulse rounded-md",t),...a})}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r});var s=a(2596),n=a(9688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,s.$)(t))}},9470:(e,t,a)=>{Promise.resolve().then(a.bind(a,9789))},9789:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ep});var s=a(5155),n=a(2115),r=a(2083);a(9303);var l=a(480),o=a(832),i=a.n(o),d=a(2596);let c=e=>{let t=e.modifiers.allDone;return(0,s.jsx)("button",{...e,className:(0,d.$)(e.className,t&&"all-done"),type:"button",children:e.children})},u=e=>{let{onSelectDate:t,onLoad:a,onDone:o}=e,[d,u]=(0,n.useState)(new Date),[x,m]=(0,n.useState)(!0),[h,f]=(0,n.useState)([]),g=()=>{t(d||new Date)},p=e=>!e||e.length<=0?[]:e.map(e=>i()(e).toDate()),v=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),b=async e=>{m(!0);try{let t=await window.api.getDoneDates(e);if(console.log(t),!t||t.length<=0)return;let a=p(t);if(!a||a.length<=0)return;f(a)}catch(e){console.log("failed to fetch calendar",e)}finally{m(!1)}};return(0,n.useEffect)(()=>{g()},[d]),(0,n.useEffect)(()=>{b(i()(new Date).format("YYYYMM"))},[]),(0,n.useEffect)(()=>{a("calendar",x)},[x]),(0,n.useEffect)(()=>{null!==o&&(o?f(e=>e.some(e=>v(e,d))?e:[...e,d]):f(e=>e.filter(e=>!v(e,d))))},[o]),(0,s.jsx)("div",{className:"pl-8 py-2",children:(0,s.jsx)(r.h,{locale:l.ko,mode:"single",selected:d,onSelect:e=>{e&&(d&&v(e,d)||(u(e),t(e)))},showOutsideDays:!0,modifiers:{allDone:e=>h.some(t=>v(t,e))},modifiersClassNames:{allDone:"all-done"},components:{DayButton:c},onMonthChange:e=>{b(i()(e).format("YYYYMM"))}})})};var x=a(704),m=a(9434);function h(e){let{className:t,...a}=e;return(0,s.jsx)(x.bL,{"data-slot":"tabs",className:(0,m.cn)("flex flex-col gap-2",t),...a})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(x.B8,{"data-slot":"tabs-list",className:(0,m.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function g(e){let{className:t,...a}=e;return(0,s.jsx)(x.l9,{"data-slot":"tabs-trigger",className:(0,m.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}var p=a(2355),v=a(3052);let b=e=>{let{categories:t,onClick:a}=e,[r,l]=(0,n.useState)(""),o=(0,n.useRef)(null),[i,d]=(0,n.useState)(!0),[c,u]=(0,n.useState)(!1),x=e=>{if(!o.current)return;let t=o.current.offsetWidth/2;o.current.scrollBy({left:"left"===e?-t:t,behavior:"smooth"})},m=()=>{let e=o.current;e&&(d(0===e.scrollLeft),u(e.scrollLeft+e.clientWidth>=e.scrollWidth-1))};return(0,n.useEffect)(()=>{let e=o.current;if(e)return m(),e.addEventListener("scroll",m),window.addEventListener("resize",m),()=>{e.removeEventListener("scroll",m),window.removeEventListener("resize",m)}},[]),(0,n.useEffect)(()=>{t&&t.length>0&&l(t[0].id)},[t]),(0,s.jsxs)("div",{className:"relative flex items-center w-full gap-2 mb-2",children:[(0,s.jsx)("button",{onClick:()=>x("left"),disabled:i,className:"p-1 rounded-full z-10 bg-white hover:bg-gray-100 transition\n                    ".concat(i?"opacity-30 pointer-events-none":"cursor-pointer","\n                "),children:(0,s.jsx)(p.A,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"relative w-full overflow-hidden",children:(0,s.jsx)(h,{value:r,onValueChange:e=>{l(e),a(e)},children:(0,s.jsx)("div",{ref:o,className:"flex gap-0 overflow-x-auto no-scrollbar",children:(0,s.jsx)(f,{className:"flex w-max gap-1",children:t&&t.map(e=>{if(!e||void 0===e.id)return null;let t=r===e.id;return(0,s.jsx)(g,{value:e.id,className:"shrink-0 whitespace-nowrap text-xs px-4 mx-0.5 rounded-md transition\n                                            ".concat(t?"bg-white shadow-sm":"text-gray-500 border-zinc-200 shadow","\n                                        "),style:{borderColor:t?e.color:"transparent",color:t?e.color:""},children:e.content},e.id)})})})})}),(0,s.jsx)("button",{onClick:()=>x("right"),disabled:c,className:"p-1 rounded-full z-10 bg-white hover:bg-gray-100 transition\n                    ".concat(c?"opacity-30 pointer-events-none":"cursor-pointer","\n                "),children:(0,s.jsx)(v.A,{className:"w-4 h-4"})})]})};var j=a(9428),w=a(7712),N=a(8176);function y(e){let{...t}=e;return(0,s.jsx)(N.bL,{"data-slot":"popover",...t})}function z(e){let{...t}=e;return(0,s.jsx)(N.l9,{"data-slot":"popover-trigger",...t})}function C(e){let{className:t,align:a="center",sideOffset:n=4,...r}=e;return(0,s.jsx)(N.ZL,{children:(0,s.jsx)(N.UC,{"data-slot":"popover-content",align:a,sideOffset:n,className:(0,m.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...r})})}var k=a(2493);let D=(0,a(2085).F)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),E=n.createContext({size:"default",variant:"default"});function S(e){let{className:t,variant:a,size:n,children:r,...l}=e;return(0,s.jsx)(k.bL,{"data-slot":"toggle-group","data-variant":a,"data-size":n,className:(0,m.cn)("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",t),...l,children:(0,s.jsx)(E.Provider,{value:{variant:a,size:n},children:r})})}function A(e){let{className:t,children:a,variant:r,size:l,...o}=e,i=n.useContext(E);return(0,s.jsx)(k.q7,{"data-slot":"toggle-group-item","data-variant":i.variant||r,"data-size":i.size||l,className:(0,m.cn)(D({variant:i.variant||r,size:i.size||l}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",t),...o,children:a})}let M=e=>{var t,a;let{todo:r,onDelete:l,onEdit:o,onDone:i,onHandleTime:d,color:c}=e,[u,x]=(0,n.useState)(r.content),[m,h]=(0,n.useState)(r.timeAt||"AM"),[f,g]=(0,n.useState)((null==(t=r.timeAt)?void 0:t.split(":")[0])||""),[p,v]=(0,n.useState)((null==(a=r.timeAt)?void 0:a.split(":")[1])||""),[b,N]=(0,n.useState)(r.timeAt?r.timeAt+r.timeAmpm:""),[z,k]=(0,n.useState)(!1),D=e=>{if("hour"===e){let e=parseInt(f);(isNaN(e)||e<0)&&(e=0),e>12&&(e=12),g(e<10?"0"+e:e.toString())}else{let e=parseInt(p);(isNaN(e)||e<0)&&(e=0),e<0&&(e=0),e>59&&(e=59),v(e<10?"0"+e:e.toString())}},E=(e,t)=>{let a=e.target.value.replace(/\D/g,"");"hour"===t?g(a):v(a)},M=()=>{if(""===u.trim())return void x(r.content);u!==r.content&&o(r.id,u)};return(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(j.A,{className:"mr-1",size:16,color:c,fill:r.status?c:"white",onClick:()=>i(r.id)}),(0,s.jsx)("input",{className:"text-sm font-medium",type:"text",value:u,placeholder:r.content,onChange:e=>x(e.target.value),onBlur:M,onKeyDown:e=>{"Enter"===e.key&&M()},spellCheck:!1})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"font-mono text-gray-500 text-xs mr-2 cursor-pointer hover:text-red-400",onClick:()=>{N(""),g(""),v(""),h("AM"),d(r.id,"","")},children:b}),(0,s.jsx)(y,{open:z,onOpenChange:e=>{if(""===f.trim())return void k(e);if(!e){let e=parseInt(f);(isNaN(e)||e<0)&&(e=0),e>12&&(e=12);let t=e<10?"0"+e:e.toString(),a=parseInt(p);(isNaN(a)||a<0)&&(a=0),a>59&&(a=59);let s=a<10?"0"+a:a.toString();g(t),v(s),N("".concat(t,":").concat(s).concat(m)),d(r.id,"".concat(t,":").concat(s),m)}k(e)},children:(0,s.jsxs)(C,{side:"bottom",className:"bg-white w-[120px] border border-gray-200 shadow-md rounded-md p-1 z-50 flex items-center gap-1",sideOffset:4,children:[(0,s.jsxs)("div",{className:"flex items-center justify-end",children:[(0,s.jsx)("input",{className:"w-1/3 text-sm",type:"text",maxLength:2,value:f,onChange:e=>E(e,"hour"),onBlur:()=>D("hour"),placeholder:"00"}),":",(0,s.jsx)("input",{className:"w-1/3 text-center text-sm",type:"text",value:p,maxLength:2,onChange:e=>E(e,"minute"),onBlur:()=>D("minute"),placeholder:"00"})]}),(0,s.jsxs)(S,{type:"single",size:"sm",className:"",value:m,onValueChange:e=>{e&&h(e)},children:[(0,s.jsx)(A,{className:"data-[state=on]:text-black text-gray-300 p-1",value:"AM",children:(0,s.jsx)("p",{className:"text-xs",children:"AM"})}),(0,s.jsx)(A,{className:"data-[state=on]:text-black text-gray-300 p-1",value:"PM",children:(0,s.jsx)("p",{className:"text-xs",children:"PM"})})]})]})}),(0,s.jsx)(w.A,{className:"",size:16,color:"gray",onClick:()=>l(r.id)})]})]})})};var F=a(4616),T=a(7715);function Y(e){let{className:t,children:a,...n}=e;return(0,s.jsxs)(T.bL,{"data-slot":"scroll-area",className:(0,m.cn)("relative",t),...n,children:[(0,s.jsx)(T.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:a}),(0,s.jsx)(L,{}),(0,s.jsx)(T.OK,{})]})}function L(e){let{className:t,orientation:a="vertical",...n}=e;return(0,s.jsx)(T.VM,{"data-slot":"scroll-area-scrollbar",orientation:a,className:(0,m.cn)("flex touch-none p-px transition-colors select-none","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:(0,s.jsx)(T.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}let B=e=>{let{todos:t,onDelete:a,onEdit:r,onAdd:l,onDone:o,onHandleTime:i,color:d}=e,[c,u]=(0,n.useState)(""),x=(0,n.useRef)(null),m=()=>{""!==c.trim()&&(l(c),u(""),x.current&&setTimeout(()=>{x.current.scrollTop=x.current.scrollHeight},50))};return(0,s.jsxs)("div",{className:"p-3 border-t-1 border-dotted m-1 h-[210px]",style:{borderColor:d},children:[(0,s.jsx)(Y,{className:"h-[200px] w-full rounded-md overflow-y-auto",children:(0,s.jsx)(T.LM,{ref:x,className:"h-full w-full",children:t&&0!==t.length?t.map(e=>(0,s.jsx)(M,{todo:e,onDelete:a,onEdit:r,onDone:o,onHandleTime:i,color:d},e.id)):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:"할일이 없습니다\uD83D\uDC4F\uD83C\uDFFB"})})}),(0,s.jsxs)("div",{className:"flex justify-between items-center my-1 pt-1",children:[(0,s.jsxs)("div",{className:"flex items-center h-[20px]",children:[(0,s.jsx)(j.A,{className:"mr-1",size:16,color:d}),(0,s.jsx)("input",{spellCheck:!1,className:"placeholder-zinc-300 outline-none border-1 w-[250px] border-transparent focus:border-b border-dotted text-sm font-medium",type:"text",onFocus:e=>e.currentTarget.style.borderBottomColor=d,onBlur:e=>e.currentTarget.style.borderBottomColor="transparent",placeholder:"새로운 할일",value:c,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&m()}})]}),(0,s.jsx)(F.A,{className:"cursor-pointer",size:16,color:"gray",onClick:m})]})]})};var _=a(9651),O=a(381),U=a(5143),I=a(402),R=a(8266),W=a(4783),V=a(8979),K=a(4861),P=a(7649),H=a(285);function Z(e){let{...t}=e;return(0,s.jsx)(P.bL,{"data-slot":"alert-dialog",...t})}function $(e){let{...t}=e;return(0,s.jsx)(P.l9,{"data-slot":"alert-dialog-trigger",...t})}function G(e){let{...t}=e;return(0,s.jsx)(P.ZL,{"data-slot":"alert-dialog-portal",...t})}function J(e){let{className:t,...a}=e;return(0,s.jsx)(P.hJ,{"data-slot":"alert-dialog-overlay",className:(0,m.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function q(e){let{className:t,...a}=e;return(0,s.jsxs)(G,{children:[(0,s.jsx)(J,{}),(0,s.jsx)(P.UC,{"data-slot":"alert-dialog-content",className:(0,m.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function Q(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,m.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function X(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,m.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function ee(e){let{className:t,...a}=e;return(0,s.jsx)(P.hE,{"data-slot":"alert-dialog-title",className:(0,m.cn)("text-lg font-semibold",t),...a})}function et(e){let{className:t,...a}=e;return(0,s.jsx)(P.VY,{"data-slot":"alert-dialog-description",className:(0,m.cn)("text-muted-foreground text-sm",t),...a})}function ea(e){let{className:t,...a}=e;return(0,s.jsx)(P.rc,{className:(0,m.cn)((0,H.r)(),t),...a})}function es(e){let{className:t,...a}=e;return(0,s.jsx)(P.ZD,{className:(0,m.cn)((0,H.r)({variant:"outline"}),t),...a})}let en=["#00BC7DFF","#a3e635","#fcd34d","#fb923c","#fb7185","#fda4af","#71717a","#60a5fa","#818cf8","#44403c"],er=e=>{let{id:t,content:a,color:r,onBlurCategoryContent:l,onChangeCategoryColor:o,onDeleteCategory:i}=e,{attributes:d,listeners:c,setNodeRef:u,transform:x,transition:m}=(0,I.gl)({id:t}),[h,f]=(0,n.useState)(a),[g,p]=(0,n.useState)(r),[v,b]=(0,n.useState)(!1),[j,w]=(0,n.useState)(!1),[N,k]=(0,n.useState)(!t||t.length<=0||h.length<=0||a.length<=0),D=e=>{b(e),e||r===g||o(t,g)};return(0,n.useEffect)(()=>{k(!t||t.length<=0||h.length<=0||a.length<=0)},[h,t]),(0,n.useEffect)(()=>{o(t,g)},[g]),(0,s.jsxs)("div",{className:"flex items-center gap-1 border-none shadow-sm rounded-sm bg-white p-2",ref:u,style:{transform:R.Ks.Transform.toString(x),transition:m,color:r},children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 flex-1",children:[(0,s.jsx)("button",{className:"cursor-pointer text-zinc-400 opacity-50 flex items-center justify-center h-6 w-6",...d,...c,children:(0,s.jsx)(W.A,{strokeWidth:2,size:15})}),(0,s.jsx)("div",{className:"text-sm flex items-center",children:(0,s.jsx)("input",{spellCheck:!1,placeholder:"엔터로 저장",maxLength:10,className:"w-full",value:h,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),l(t,h))},onChange:e=>f(e.target.value),onBlur:e=>{e.preventDefault(),h!==a&&l(t,h)}})})]}),(0,s.jsxs)(y,{open:v,onOpenChange:e=>D(e),children:[(0,s.jsx)(z,{asChild:!0,children:(0,s.jsx)("button",{disabled:N,className:"cursor-pointer mt-0.5 flex items-center justify-center h-6 w-6 disabled:opacity-50 disabled:cursor-default",children:(0,s.jsx)(V.A,{fill:r,strokeWidth:2,size:16})})}),(0,s.jsx)(C,{side:"right",className:"w-40 bg-white border-zinc-100",children:(0,s.jsx)("div",{className:"grid grid-cols-5 grid-rows-2",children:en&&en.map((e,t)=>(0,s.jsx)("button",{onClick:t=>{t.preventDefault(),p(e)},className:"cursor-pointer mt-0.5 flex items-center justify-center h-6 w-6",children:(0,s.jsx)(V.A,{className:e===g?"border-1 border-zinc-300 shadow-md":"",color:e,fill:e,strokeWidth:2,size:20})},e))})})]}),t&&t.trim().length>0&&(0,s.jsxs)(Z,{open:j,onOpenChange:w,children:[(0,s.jsx)($,{asChild:!0,children:(0,s.jsx)("button",{disabled:N,className:"cursor-pointer mt-0.5 flex items-center justify-center h-4 w-4 disabled:opacity-50 disabled:cursor-default",children:(0,s.jsx)(K.A,{color:"#fb7185",strokeWidth:2,size:16})})}),(0,s.jsxs)(q,{className:"w-95 bg-white border-zinc-100",children:[(0,s.jsxs)(Q,{children:[(0,s.jsx)(ee,{className:"font-medium text-zinc-800 text-lg",children:"정말로 카테고리를 삭제하시겠습니까?\uD83E\uDD14"}),(0,s.jsx)(et,{className:"text-sm text-zinc-500",children:"카테고리 내 모든 할 일이 사라지고, 복원할 수 없습니다."})]}),(0,s.jsxs)(X,{children:[(0,s.jsx)(es,{className:"text-sm text-zinc-500 border-zinc-300 border-1 hover:text-zinc-700 cursor-pointer",children:"취소"}),(0,s.jsx)(ea,{className:"text-sm border-[#e57373] border-1 hover:text-[#e57373] cursor-pointer",onClick:e=>{e.preventDefault(),i(t),w(!1)},children:"삭제"})]})]})]})]})};var el=a(5964),eo=a.n(el),ei=a(6671);let ed=e=>{let{categories:t,onChangeCategorySort:a,onChangeCategoryContent:r,onAddCategory:l,onOpen:o}=e,[i,d]=(0,n.useState)([]),c=(0,U.FR)((0,U.MS)(U.AN),(0,U.MS)(U.uN,{coordinateGetter:I.JR})),u=(e,t)=>{var a,s,n,r;if(!e||0===e.length)return(0,_.TU)(null,null);let l=null!=(a=e[t-1])?a:null,o=null!=(s=e[t])?s:null,i=null!=(n=null==l?void 0:l.sort)?n:null,d=null!=(r=null==o?void 0:o.sort)?r:null;return null===i&&null===d?(0,_.TU)(null,null):null===i?(0,_.TU)(null,d):null===d?(0,_.TU)(i,null):i===d?null:i<d?(0,_.TU)(i,d):null},x=async e=>{if(e&&""!==e){if(i.length<=1)return void(0,ei.oR)("최소 1개 이상의 카테고리가 필요합니다.",{description:"",action:{label:"확인",onClick:()=>{}},position:"top-right",className:"bg-white border-1 border-zinc-300 text-zinc-700"});d(t=>t.filter(t=>t.id!==e));try{await window.api.deleteCategory(e)}catch(e){console.log("Failed to remove category",e)}}},m=async(e,t)=>{""!==e&&""!==t&&d(a=>a.map(a=>{if(a.id===e){try{window.api.updateCategory(e,{...a,color:t})}catch(e){console.log(e)}return{...a,color:t}}return a}))},h=async(e,t)=>{t&&""!==t&&(e&&e.length>0?await r(e,t):await l(t))},f=e=>{let{active:t,over:s}=e;(null==t?void 0:t.id)&&(null==s?void 0:s.id)&&t.id!==s.id&&d(e=>{let n=e.findIndex(e=>e.id===t.id),r=e.findIndex(e=>e.id===s.id),l=e[n],o=u(e,r);return l&&o?(a(l.id,o),(0,I.be)(e,n,r)):e})},g=(0,n.useRef)(eo()(e=>{f(e)},300)).current;return(0,n.useEffect)(()=>()=>{g.cancel()},[g]),(0,n.useEffect)(()=>{t&&0!==t.length&&d(t)},[t]),(0,s.jsx)(U.Mp,{children:(0,s.jsxs)(y,{onOpenChange:e=>{e||o()},children:[(0,s.jsx)(z,{asChild:!0,children:(0,s.jsx)("button",{className:"mr-4 text-zinc-400 rounded-sm cursor-pointer flex justify-center items-center mb-2",children:(0,s.jsx)(O.A,{className:"mt-1",size:17})})}),(0,s.jsxs)(C,{className:"w-56 bg-white border-zinc-100",children:[(0,s.jsx)("div",{className:"grid gap-4 mb-2",children:(0,s.jsxs)("div",{className:"flex justify-between text-zinc-500 align-middle",children:[(0,s.jsx)("div",{className:"text-sm",children:"카테고리 설정"}),(0,s.jsx)("button",{className:"hover:text-[#166534] cursor-pointer",children:(0,s.jsx)(F.A,{onClick:()=>{i&&i.length>0&&i.filter(e=>""===e.id).length>0||d([...i,{color:"#00BC7DFF",content:"",createdAt:"",deletedAt:"",id:"",sort:"",userId:""}])},size:15})})]})}),(0,s.jsx)(U.Mp,{sensors:c,collisionDetection:U.fp,onDragEnd:f,children:(0,s.jsx)(I.gB,{items:i.map(e=>e.id),strategy:I._G,children:i&&i.length>0&&i.map(e=>(0,s.jsx)("div",{className:"mb-1",children:(0,s.jsx)(er,{id:e.id,content:e.content,color:e.color,onBlurCategoryContent:h,onChangeCategoryColor:m,onDeleteCategory:x})},e.id))})})]})]})})};a(9810),i()().locale("ko");let ec={color:"#00BC7DFF",content:"내 카테고리",createdAt:"",deletedAt:"",id:"",sort:(0,_.TU)(null,null),userId:""},eu=["할일 끝! 내 능력치가 +10 올랐어요! \uD83C\uDD99","미션 컴플리트! 상금은? 내 기분! \uD83C\uDFC6","끝냈어요! 이제 침대가 날 기다려요! \uD83D\uDECB️","할일 클리어! 이젠 냉장고 탐험 타임! \uD83E\uDD6A","오늘의 할일:✔️ 내일은... 생각 안 해요! \uD83E\uDD37‍♂️","전설이 됐어요! 이제 전설적인 휴식을… \uD83E\uDDB8","모든 할일 해냈다! 당신, 진짜 사람 맞나? \uD83E\uDD16","클리어! 축하합니다, 당신은 슈퍼히어로! \uD83E\uDDB8‍♀️","할일 다 끝냈으니, 뇌도 휴식! \uD83E\uDDE0\uD83D\uDCA4","오늘은 끝! 내일은… 내일 생각해! \uD83D\uDCA4","할일 다 끝났어요! 뿌듯해요! \uD83D\uDE0A","오늘도 해냈다! 이제 커피 한잔? ☕️","다 했으니 게임 한 판 할 시간! \uD83C\uDFAE","완료! 이 기세로 내일도 화이팅! \uD83D\uDCAA","할일 끝! 오늘도 내가 최고! \uD83D\uDC51","와우! 다 끝났어요! 축하 파티 준비! \uD83C\uDF89","끝냈다! 이제 휴식 모드 ON! \uD83D\uDECC","다 했다니! 내일도 같이 달려요! \uD83D\uDE80","할일 완료! 이제 영화 볼 시간! \uD83C\uDF7F","모든 게 끝났다! 당신은 슈퍼히어로?! \uD83E\uDDB8‍♂️"],ex=()=>{let e=Math.floor(Math.random()*eu.length);return eu[e]},em=e=>{let{selectedDate:t,onLoad:a,onDone:r}=e,[l,o]=(0,n.useState)(!0),[d,c]=(0,n.useState)([]),[u,x]=(0,n.useState)([]),[m,h]=(0,n.useState)(""),[f,g]=(0,n.useState)(""),[p,v]=(0,n.useState)(0),[j,w]=(0,n.useState)(0),N=(0,n.useRef)(new Map),y=async()=>{if(o(!0),window.api)try{let e=await window.api.getCategories("");if(!e||e.length<=0){let t=await window.api.addCategory(ec);e.push(t)}x(e),h(e.length>0?e[0].color:"#166534"),e&&e.length>0&&g(e[0].id)}catch(e){console.log("Failed to get Categories",e)}finally{o(!1)}else console.error("window.api is not available")},z=async(e,t)=>{try{return await window.api.getTodos(e,t)}catch(e){return console.log("Failed to get todos :",e),[]}},C=async e=>{try{let{total_count:t,done_count:a}=await window.api.getTodosCount(e);v(t),w(a)}catch(e){return console.log("Failed to fetch todos count :",e),0}},k=async e=>{try{await window.api.deleteTodo(e)}catch(e){console.log("Failed to delete todo :",e)}},D=async(e,t)=>{try{await window.api.updateTodoContent(e,t)}catch(e){console.log("Failed to edit todo :",e)}},E=async e=>{let a={id:"",userId:"",categoryId:f,sort:d&&d.length>0?(0,_.TU)(d[d.length-1].sort,null):(0,_.TU)(null,null),content:e,date:i()(t).format("YYYYMMDD"),timeAt:"",timeAmpm:"",status:!1};try{return await window.api.addTodo(a)}catch(e){console.log("Failed to add todo :",e)}return null},S=async e=>{let t=await E(e);t&&(c(e=>[...e,t]),v(p+1))},A=async(e,t)=>{try{let a=u.filter(t=>t.id===e)[0];a&&await window.api.updateCategory(e,{...a,sort:t})}catch(e){console.log(e)}},M=async(e,t)=>{try{await window.api.updateCategoryContent(e,t)}catch(e){console.log(e)}x(a=>a.map(a=>a.id===e?{...a,content:t}:a))},F=async e=>{let t=u&&u.length>0?(0,_.TU)(u[u.length-1].sort,null):(0,_.TU)(null,null);try{let a=await window.api.addCategory({color:"#00BC7DFF",content:e,createdAt:"",deletedAt:"",id:"",sort:t,userId:""});x(e=>[...e,a])}catch(e){console.log("Failed to update category content")}},T=async()=>{await y()},Y=()=>{let e=i()(t).format("YYYYMMDD"),a=d&&d.length>0&&d.every(e=>e.status)&&j>=p,s=N.current.get(e)||!1;a&&!s?((0,ei.oR)(ex(),{duration:2e3,description:"",action:{label:"확인",onClick:()=>{}},position:"top-right",className:"bg-white border-1 border-zinc-300 text-zinc-700"}),r(!0),N.current.set(e,!0)):a||(N.current.set(e,!1),r(!1))};return(0,n.useEffect)(()=>{let e=i()(t).format("YYYYMMDD");(async()=>{c(await z(f,e))})(),C(e)},[t,f]),(0,n.useEffect)(()=>{y()},[]),(0,n.useEffect)(()=>{a("todo",l)},[l]),(0,n.useEffect)(()=>{Y()},[d]),(0,s.jsxs)("div",{className:"w-[350px]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)("div",{className:"flex-1 min-w-0 pr-3",children:(0,s.jsx)(b,{categories:u,onClick:e=>{g(e),h(u.filter(t=>t.id===e)[0].color)}})}),(0,s.jsx)(ed,{categories:u,onChangeCategorySort:A,onChangeCategoryContent:M,onAddCategory:F,onOpen:T})]}),(0,s.jsx)(B,{todos:d,onDelete:e=>{k(e),c(t=>t.filter(t=>t.id!=e)),v(p-1)},onEdit:(e,t)=>{D(e,t)},onAdd:S,onDone:e=>{c(t=>t.map(t=>{if(t.id===e){try{window.api.updateTodoStatus(e,!t.status),w(j+1)}catch(e){console.log(e)}return{...t,status:!t.status}}return t}))},onHandleTime:(e,t,a)=>{c(s=>s.map(s=>{if(s.id===e){try{window.api.updateTodo(e,{...s,timeAt:t,timeAmpm:a})}catch(e){console.log(e)}return{...s,timeAt:t,timeAmpm:a}}return s}))},color:m})]})};var eh=a(8856);let ef=()=>(0,s.jsxs)("div",{className:"flex flex-col space-y-3 h-[300px] w-[350px]",children:[(0,s.jsx)(eh.E,{className:"h-[50px] w-[350px] bg-zinc-200 rounded-xl"}),(0,s.jsxs)("div",{className:"space-y-2 ml-2",children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(eh.E,{className:"h-4 w-4 rounded-full bg-zinc-200"}),(0,s.jsx)(eh.E,{className:"h-4 w-[316px] bg-zinc-200"})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(eh.E,{className:"h-4 w-4 rounded-full bg-zinc-200"}),(0,s.jsx)(eh.E,{className:"h-4 w-[316px] bg-zinc-200"})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(eh.E,{className:"h-4 w-4 rounded-full bg-zinc-200"}),(0,s.jsx)(eh.E,{className:"h-4 w-[280px] bg-zinc-200"})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(eh.E,{className:"h-4 w-4 rounded-full bg-zinc-200"}),(0,s.jsx)(eh.E,{className:"h-4 w-[215px] bg-zinc-200"})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(eh.E,{className:"h-4 w-4 rounded-full bg-zinc-200"}),(0,s.jsx)(eh.E,{className:"h-4 w-[295px] bg-zinc-200"})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(eh.E,{className:"h-4 w-4 rounded-full bg-zinc-200"}),(0,s.jsx)(eh.E,{className:"h-4 w-[280px] bg-zinc-200"})]})]}),(0,s.jsx)(eh.E,{className:"mt-15 h-[40px] w-[350px] bg-zinc-200 rounded-xl"})]}),eg=()=>(0,s.jsxs)("div",{className:"flex flex-col space-y-3 h-[300px] w-[350px]",children:[(0,s.jsx)(eh.E,{className:"h-[50px] w-[200px] bg-zinc-200 rounded-xl"}),(0,s.jsx)(eh.E,{className:"h-[20px] w-[350px] bg-zinc-200 rounded-xl"}),(0,s.jsx)(eh.E,{className:"h-[240px] w-[350px] bg-zinc-200 rounded-xl"})]});function ep(){let[e,t]=(0,n.useState)(),[a,r]=(0,n.useState)(!0),[l,o]=(0,n.useState)(!0),[i,d]=(0,n.useState)(!0),[c,x]=(0,n.useState)(null);(0,n.useEffect)(()=>{a||l||d(!1)},[a,l]);let m=(e,t)=>{"calendar"===e?r(t):"todo"===e&&o(t)};return(0,s.jsx)("div",{className:"flex min-h-[500] max-h-[500px] items-center justify-center gap-4 p-4 pt-0 mt-8",children:(0,s.jsxs)("div",{className:"grid auto-rows-min gap-10 md:grid-cols-2",children:[(0,s.jsx)("div",{className:"rounded-xl bg-white border-zinc-100 border-1 shadow-md ".concat(i?"hidden":""),children:(0,s.jsx)(u,{onLoad:m,onSelectDate:e=>{t(e)},onDone:c})}),i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"rounded-xl bg-white p-3 border-zinc-100 border-1 shadow-md",children:(0,s.jsx)(eg,{})}),(0,s.jsx)("div",{className:"rounded-xl bg-white p-3 border-zinc-100 border-1 shadow-md",children:(0,s.jsx)(ef,{})})]}),(0,s.jsx)("div",{className:"rounded-xl bg-white p-3 border-zinc-100 border-1 shadow-md ".concat(i?"hidden":""),children:(0,s.jsx)(em,{selectedDate:e,onLoad:m,onDone:e=>{x(e)}})})]})})}a(9810),i()().locale("ko")}},e=>{var t=t=>e(e.s=t);e.O(0,[638,399,522,441,684,358],()=>t(9470)),_N_E=e.O()}]);